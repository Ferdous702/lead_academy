// All rights reserved by Omnisend Ltd. Look, but don't touch.
// https://www.omnisend.com/
// v4.0.1
var supportedVersion = 1; self.addEventListener("install", function (t) { "use strict"; t.waitUntil(self.skipWaiting()) }), self.addEventListener("activate", function (t) { "use strict"; t.waitUntil(self.clients.claim()) }); var fetchViewData = function (t, i, n, e) { "use strict"; return new Promise(function (a, c) { fetch(t).then(a)["catch"](function (t) { var o = i; return e >= n ? (o = o.indexOf("?") < 0 ? i + "?retry=" + n : i + "&retry=" + n, void setTimeout(function () { n += 1, fetchViewData(o, i, n, e).then(a)["catch"](c) }, 3e3)) : a(t) }) }) }; self.addEventListener("push", function (t) { "use strict"; if (t && t.data) { var i = t.data.json(); i.data = t.data.json(), i.forceUpdate ? self.registration && self.registration.update() : i.title && i.body && t.waitUntil(self.registration.showNotification(i.title, i).then(function () { i.viewURL && fetchViewData(i.viewURL, i.viewURL, 1, 3).then(function () { i.requiredVersion && i.requiredVersion > supportedVersion && self.registration && self.registration.update() }, function () { }) }, function () { })) } }), self.addEventListener("notificationclick", function (t) { "use strict"; if (t.notification.close(), t.notification && t.notification.data) { var i = t.notification.data, n = ""; t.action && i.actions && i.actions.length && i.actions.forEach(function (i) { t.action === i.action && i.clickURL && (n = i.clickURL) }), t.action && n && t.waitUntil(clients.openWindow(n)), !t.action && i.clickURL && t.waitUntil(clients.openWindow(i.clickURL)) } });
